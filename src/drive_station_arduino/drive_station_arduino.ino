
#include <Adafruit_NeoPixel.h>
#include <Adafruit_IS31FL3741.h>

/*
Note: We have a Adafruit Feather RP2040 '
  which controls a Neopixel strip of RGB LEDs, and an Adafruit IS31FL3741 13x9 PWM RGB LED panel,
  and recieves input from some potentiometers as well as a mode-switch button on a couple extra pins.

To run the code:
make sure the drive_station_arduino.ino file is selected
do Ctrl-Shift-P and run `Arduino: Upload`
follow the other prompts

Untested! If it works, please remove this message.

*/

#define numberOfImages 6
#define LED_PIN 7
#define LED_COUNT 59
#define BR_PIN 26
#define R_PIN 27
#define G_PIN 28
#define B_PIN 29
#define MODE_PIN 25

Adafruit_NeoPixel strip(LED_COUNT, LED_PIN, NEO_GRB + NEO_KHZ800);

Adafruit_IS31FL3741_QT ledmatrix;

TwoWire *i2c = &Wire1;

char text[] = "Made By Tobin Geren-Mori";   // A message to scroll
int text_x = ledmatrix.width(); // Initial text position = off right edge
int text_y = 1;
int text_min; 

const uint8_t allImages[numberOfImages][9][39] = {
{
  {0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B01000100, 0B11111111, },
  {0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B01000100, 0B11111111, },
  {0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, },
  {0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, },
  {0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, },
  {0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, },
  {0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, },
  {0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B01000100, 0B11111111, },
  {0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B01000100, 0B11111111, 0B11111111, 0B01000100, 0B11111111, },
},
{
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
},
{
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
},
{
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
},
{
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
  {0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, 0B11111111, 0B10001000, 0B11111111, 0B10110000, 0B10110000, 0B10110000, },
},
{
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B00000000, 0B11111111, 0B10001000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B10001000, 0B00000000, 0B11111111, 0B10001000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10001000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B10001000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B10000000, 0B10000000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B10000000, 0B10000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11000000, 0B01100000, 0B01100000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11000000, 0B01100000, 0B01100000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
  {0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B11111111, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, 0B00000000, },
}
};

/*const uint32_t allImages[numberOfImages][9][13] = {{
  {0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
  {0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0111111111111111100000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, 0000000000000000000000000B00000000, },
}
};*/

int currentImage=0;

float BR_DEC;
uint8_t RED;
uint8_t GREEN;
uint8_t BLUE;

void setup() {
  // Serial.begin(115200);
  // Serial.println("Adafruit QT RGB Matrix Simple RGB Swirl Test");

  while (! ledmatrix.begin(IS3741_ADDR_DEFAULT, i2c)) {
    Serial.println("IS41 not found");
  }

  //Serial.println("IS41 found!");
  pinMode(MODE_PIN, INPUT_PULLUP);
  strip.begin();            // INITIALIZE NeoPixel strip object (REQUIRED)
  strip.show();             // Turn OFF all pixels ASAP
  strip.setBrightness(50);  // Set BRIGHTNESS to about 1/5 (max = 255)

  // By default the LED controller communicates over I2C at 400 KHz.
  // Arduino Uno can usually do 800 KHz, and 32-bit microcontrollers 1 MHz.
  i2c->setClock(800000);

  // Set brightness and bring controller out of shutdown state
  ledmatrix.setLEDscaling(0xFF);
  ledmatrix.setGlobalCurrent(128);
  ledmatrix.enable(true); // bring out of shutdown
  ledmatrix.setRotation(0);
  ledmatrix.setTextWrap(false);
  uint16_t w, h;
  int16_t ignore;
  ledmatrix.getTextBounds(text, 0, 0, &ignore, &ignore, &w, &h);
  text_min = -w; // Off left edge this many pixels
   
  ledmatrix.fill(0); // Fill screen to erase old text
  ledmatrix.setCursor(text_x, text_y);
  for (int i = 0; i < (int)strlen(text); i++) {
    // set the color thru the rainbow
    uint32_t color888 = ledmatrix.ColorHSV(65536 * i / strlen(text));
    uint16_t color565 = ledmatrix.color565(color888);
    ledmatrix.setTextColor(color565); // No background color needed
    ledmatrix.print(text[i]); // write the letter
  }

  ledmatrix.show(); // Buffered matrix MUST use show() to update!

  if (--text_x < text_min) {
    text_x = ledmatrix.width();
  }
}

int mode = 0;
long firstPixelHue = 0;

void loop() {
  while (currentImage < numberOfImages){
    printImageNumber(currentImage);
    for(int l = 0; l < 500; l++){
      BR_DEC = (analogRead(BR_PIN));
      if(digitalRead(MODE_PIN) == 0){while(digitalRead(MODE_PIN) == 0){delay(5);}mode++;}

      switch (mode){
        case 0: //theater chase
          theaterChase(strip.Color(255, 72, 0), 10);
          break;
        case 1: //rainbow mode
          if (firstPixelHue >= 65536){firstPixelHue=0;}
          firstPixelHue += 256;
          strip.rainbow(firstPixelHue);
          strip.show();  // Update strip with new contents
          break;
        case 2: //dial mode
          
          RED = (((analogRead(R_PIN) / 4) * BR_DEC)/1024);
          GREEN = (((analogRead(G_PIN) / 4) * BR_DEC)/1024);
          BLUE = (((analogRead(B_PIN) / 4) * BR_DEC)/1024);
          for (int i = 0; i < LED_COUNT; i++) {  // For each pixel...
            strip.setPixelColor(i, strip.Color(RED, GREEN, BLUE));
          }
          strip.show();
          break;
        default:
          mode=0;
          break;
        }
        delay(10);
    }
    currentImage++;
  }
  currentImage=0;    
}

void theaterChase(uint32_t color, int wait) {
  for (int b = 0; b < 3; b++) {  //  'b' counts from 0 to 2...
    strip.clear();               //   Set all pixels in RAM to 0 (off)
    // 'c' counts up from 'b' to end of strip in steps of 3...
    for (int c = b; c < strip.numPixels(); c += 3) {
      strip.setPixelColor(c, color);  // Set pixel 'c' to value 'color'
    }
    strip.show();  // Update strip with new contents
    delay(wait);   // Pause for a moment
  }
}



void printImageNumber (int image_number){
    uint32_t color;
    for (int y=0; y <ledmatrix.height(); y++) {
      for (int x=0; x<ledmatrix.width(); x++) {
           RED = (allImages[image_number][y][(x*3)]* BR_DEC)/1024;
           GREEN = (allImages[image_number][y][(x*3)+1]* BR_DEC)/1024; 
           BLUE = (allImages[image_number][y][(x*3)+2]* BR_DEC)/1024;
            //  color = {(allImages[image_number][y][(x*3)]<<16)+(allImages[image_number][y][(x*3)+1]<<8)+(BLUE = allImages[image_number][y][(x*3)+2])};
            //  ledmatrix.gamma32(color);
            // uint16_t color565 = ledmatrix.color565(color);

          uint16_t color565 = ledmatrix.color565(RED,GREEN,BLUE);
          ledmatrix.drawPixel(x, y, color565);
      }
    }
  }